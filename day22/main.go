package main

import "fmt"

func main() {
	{
		width, height := len(world[0]), len(world)

		wallAt := func(x, y int) bool {
			return world[y][x] == '#'
		}
		nothingAt := func(x, y int) bool {
			return world[y][x] == ' '
		}

		x, y, dir := 0, 0, rightDir
		for i := range world[0] {
			if world[0][i] == '.' {
				x = i
				break
			}
		}

		step := func() {
			dx, dy := 0, 0
			switch dir {
			case rightDir:
				dx = 1
			case downDir:
				dy = 1
			case leftDir:
				dx = -1
			case upDir:
				dy = -1
			}

			xx, yy := x, y
			for {
				xx = (xx + dx + width) % width
				yy = (yy + dy + height) % height
				if !nothingAt(xx, yy) {
					break
				}
			}

			if !wallAt(xx, yy) {
				x, y = xx, yy
			}
		}

		for _, m := range moves {
			if m == L {
				dir = (dir + 3) % 4
			} else if m == R {
				dir = (dir + 1) % 4
			} else {
				for i := 0; i < m; i++ {
					step()
				}
			}
		}

		col, row := x+1, y+1
		fmt.Println("part 1)", 1000*row+4*col+dir)
	}

	{
		/*
			For part 2 we look at the cube like this:

			        +-------+
			        |       |
			        |  top  |
			        |       |
			+-------+-------+-------+
			|       |       |       |
			| left  | front | right |
			|       |       |       |
			+-------+-------+-------+
			        |       |
			        |bottom |
			        |       |
			        +-------+
			        |       |
			        | back  |
			        |       |
			        +-------+

			We are always on the front and once we go out over one of the edges,
			we rotate all these sides (3D-like) and are still on the (new)
			front.

			Note that rotating a cube right is the same as rotating it left 3
			times. The same goes for up/down rotation.

			We first transform our input of the form

			        +-------+-------+                  +-------+
			        |       |       |                  |       |
			        | front | right |                  |  top  |
			        |       |       |                  |       |
			        +-------+-------+          +-------+-------+-------+
			        |       |                  |       |       |       |
			        |bottom |           ===>   | left  | front | right |
			        |       |                  |       |       |       |
			+-------+-------+                  +-------+-------+-------+
			|       |       |                          |       |
			| left  | back  |                          |bottom |
			|       |       |                          |       |
			+-------+-------+                          +-------+
			|       |                                  |       |
			|  top  |                                  | back  |
			|       |                                  |       |
			+-------+                                  +-------+

			into the nicer-to-work with form above.
		*/

		front := newCubeSide(inputSquare(1, 0))
		right := newCubeSide(inputSquare(2, 0))
		bottom := newCubeSide(inputSquare(1, 1))
		left := newCubeSide(inputSquare(0, 2))
		left.rotate180()
		top := newCubeSide(inputSquare(0, 3))
		top.rotateLeft()
		back := newCubeSide(inputSquare(1, 2))

		size := front.size()

		rotateCubeLeft := func() {
			front, right, bottom, left, top, back =
				right, back, bottom, front, top, left
			top.rotateRight()
			right.rotate180()
			bottom.rotateLeft()
			back.rotate180()
		}
		rotateCubeRight := func() {
			rotateCubeLeft()
			rotateCubeLeft()
			rotateCubeLeft()
		}
		rotateCubeDown := func() {
			front, right, bottom, left, top, back =
				top, right, front, left, back, bottom
			left.rotateRight()
			right.rotateLeft()
		}
		rotateCubeUp := func() {
			rotateCubeDown()
			rotateCubeDown()
			rotateCubeDown()
		}

		x, y, dir := 0, 0, rightDir

		step := func() {
			xx, yy := x, y
			switch dir {
			case rightDir:
				xx++
			case downDir:
				yy++
			case leftDir:
				xx--
			case upDir:
				yy--
			}

			undo := func() {}

			if xx == -1 {
				rotateCubeRight()
				xx = size - 1
				undo = rotateCubeLeft
			}
			if xx == size {
				rotateCubeLeft()
				xx = 0
				undo = rotateCubeRight
			}
			if yy == -1 {
				rotateCubeDown()
				yy = size - 1
				undo = rotateCubeUp
			}
			if yy == size {
				rotateCubeUp()
				yy = 0
				undo = rotateCubeDown
			}

			if front.at(xx, yy) != '#' {
				x, y = xx, yy
			} else {
				undo()
			}
		}

		for _, m := range moves {
			if m == L {
				dir = (dir + 3) % 4
			} else if m == R {
				dir = (dir + 1) % 4
			} else {
				for i := 0; i < m; i++ {
					step()
				}
			}
		}

		x, y = front.originalXY(x, y)
		col, row := x+1, y+1
		fmt.Println("part 2)", 1000*row+4*col+dir)
	}
}

func inputSquare(x, y int) (lines []string, startX, startY int) {
	w, h := len(world[0])/3, len(world)/4
	x1 := x * w
	x2 := (x + 1) * w
	y1 := y * h
	y2 := (y + 1) * h

	for y := y1; y < y2; y++ {
		lines = append(lines, world[y][x1:x2])
	}
	startX = x1
	startY = y1
	return
}

func newCubeSide(lines []string, startX, startY int) *cubeSide {
	return &cubeSide{
		lines:          lines,
		startX:         startX,
		startY:         startY,
		indexTransform: func(x, y int) (int, int) { return x, y },
		undo:           func(x, y int) (int, int) { return x, y },
	}
}

type cubeSide struct {
	lines          []string
	startX         int
	startY         int
	indexTransform func(x, y int) (int, int)
	undo           func(x, y int) (int, int)
}

func (s *cubeSide) size() int {
	return len(s.lines)
}

func (s *cubeSide) at(x, y int) byte {
	x, y = s.indexTransform(x, y)
	return s.lines[y][x]
}

func (s *cubeSide) originalXY(x, y int) (int, int) {
	x, y = s.undo(x, y)
	return x + s.startX, y + s.startY
}

func (s *cubeSide) rotateLeft() {
	{
		old := s.indexTransform
		s.indexTransform = func(x, y int) (int, int) {
			x, y = old(x, y)
			return s.size() - 1 - y, x
		}
	}

	{
		old := s.undo
		s.undo = func(x, y int) (int, int) {
			x, y = s.size()-1-y, x
			return old(x, y)
		}
	}
}

func (s *cubeSide) rotateRight() {
	s.rotateLeft()
	s.rotateLeft()
	s.rotateLeft()
	return
	{
		old := s.indexTransform
		s.indexTransform = func(x, y int) (int, int) {
			x, y = old(x, y)
			return y, s.size() - 1 - x
		}
	}

	{
		old := s.undo
		s.undo = func(x, y int) (int, int) {
			x, y = s.size()-1-y, x
			return old(x, y)
		}
	}
}

func (s *cubeSide) rotate180() {
	s.rotateRight()
	s.rotateRight()
}

const (
	L = 99999
	R = -99999

	rightDir = 0
	downDir  = 1
	leftDir  = 2
	upDir    = 3
)

var world = []string{
	"                                                  .#..#......#...................................................#..#............#...................#",
	"                                                  ....#.........#.........##...............##..............#............#.##......#............#......",
	"                                                  .............#................#.##....##.........#..#.............#...#............#................",
	"                                                  ...........#...........#...#...........................#.#...#.#.#...#...........#................#.",
	"                                                  ..#..................................#...............#....#...........#.#...#......#................",
	"                                                  ......#.................#...................#.......#...............#........#......................",
	"                                                  ...........##..............................##.......##.......#..##..........#..........#......#..#..",
	"                                                  ..........#....#.#..........#..........#......#.#............................................#......",
	"                                                  ........#......................#...................#....#....#........#.#...........................",
	"                                                  .........................#....#....#.#...................#.........#.........#.........#............",
	"                                                  .........................##.......#...#.........#.......#.....##.....#..#......#..................#.",
	"                                                  ..........##....#.........#.##.........................#.....#...#.#......................#.........",
	"                                                  ......#.....#............#.......#..#.....#....#.....#..........#.....#.............#..#....#....#..",
	"                                                  #.................................#..................#.....#..#........#.................#..........",
	"                                                  #................#....##..........................#.....#.....................#......#........#....#",
	"                                                  .................#....##.#.#.....#...........#...#....#...#......#........#.................##......",
	"                                                  ...................#...........................#..........#........#..#...........#.................",
	"                                                  .#.................#....................#........#.................#....#.#..............#.........#",
	"                                                  ..#.................#.....#...#.............#...............................#................#.#....",
	"                                                  ......#.#........#.#......................................#..............#........#.........#.......",
	"                                                  ...#.#.##..................#......##......#.......#.#..........................#....................",
	"                                                  ..............#....#........####..........................#...............#............#............",
	"                                                  ..#.............#.....###....................#....................#....#........#...................",
	"                                                  .................#........#.#..#........................................#..............#.#..........",
	"                                                  ....#...................................................#...#...##...#..#...........................",
	"                                                  .......#...#...................#..............#.........#...#....#......#...............#...........",
	"                                                  .............#...........#.#........................#...#...#.....................#.......#....#....",
	"                                                  #............#...#..#........#...................#...........#......#..#.#.........................#",
	"                                                  ...#...............#..#..#.............#.................#....#....#.........#.................#....",
	"                                                  ......#...........##.#...#..#.................................##.#.#..................#..#..........",
	"                                                  ....#........#.........#................................#.............#.....#....#..................",
	"                                                  ......................#..........#.....#.....#.#...........#........................#............###",
	"                                                  #...#..................#....#......#...#........................#..............#........#..#.......#",
	"                                                  ...#............#.............#..##.#.#..#..#.#.........#.............#....#...........#.....#......",
	"                                                  .................##......#.....................#...#....##................#..#.......#....#.........",
	"                                                  ....#..#.........................................#....................................#...#.........",
	"                                                  #....#...................##................#..........#..#........#..#..............#...............",
	"                                                  .................................#..#.............#.................#...#...................#.....#.",
	"                                                  ..#................................#.........#................#..#......................#...........",
	"                                                  ..#..#.............##..........#......................#..............#....#...#.....#....#.....#...#",
	"                                                  ...........##....................##..#......#...........#..............................#..#........#",
	"                                                  ............................#.....................#.................................................",
	"                                                  ....#..........#.#........#...................#........#.....###....................................",
	"                                                  ...#......#..#......#..........#......#....#..............#..........................#..............",
	"                                                  #...............#..............................#..........#......................#..................",
	"                                                  .#...........#..............#..#.........#.......#..........#..............#........................",
	"                                                  .................#...................#........#..#................#.......#........#................",
	"                                                  ..............#.....##.................#...........#...#.....................#.....#....##..........",
	"                                                  .........................#.#................#......#....#............##.......................#.....",
	"                                                  ..#....#....................#..#...#.....#..#...........................#....##..##.......#.....#.#.",
	"                                                  .#.....................#.....#......#.#...#....#.#                                                  ",
	"                                                  ........#...........#.........#.....#....#........                                                  ",
	"                                                  ....#...................#....#...#.......#........                                                  ",
	"                                                  ................##.#........#..#..........#..#....                                                  ",
	"                                                  ..#...............##...#......#.............#.....                                                  ",
	"                                                  .#...................#.....#.................#....                                                  ",
	"                                                  ....#.....................#.....#.....#...........                                                  ",
	"                                                  #................#...............#.##..#.#........                                                  ",
	"                                                  ..#...#....#...................................#..                                                  ",
	"                                                  ................#...............#.................                                                  ",
	"                                                  .#......................#.....#.#....#............                                                  ",
	"                                                  .......#..........#..................#..#..#..#..#                                                  ",
	"                                                  ###..###......#.#..........................#..#...                                                  ",
	"                                                  .........#.........................##.............                                                  ",
	"                                                  ..##.........#.............#......................                                                  ",
	"                                                  ...#..............#....#.#....#........#....##....                                                  ",
	"                                                  ...........................#....##.........#.#....                                                  ",
	"                                                  .............#.................#...#.#............                                                  ",
	"                                                  .............#..#....#..........................#.                                                  ",
	"                                                  .#.......#................#..##.............#....#                                                  ",
	"                                                  #..#.......#.................#........#...........                                                  ",
	"                                                  ....#...........#..............##.#....#..........                                                  ",
	"                                                  .#.................#.......#...##..........#....#.                                                  ",
	"                                                  ..................................................                                                  ",
	"                                                  ..................#.#......#......#.....#.........                                                  ",
	"                                                  .........#.....#................................#.                                                  ",
	"                                                  ..#............##.................................                                                  ",
	"                                                  ......#...#................##.......#.............                                                  ",
	"                                                  .......#...##..#..#.................#....#..#.....                                                  ",
	"                                                  ..............##..#..............#................                                                  ",
	"                                                  .....................#......#...#.................                                                  ",
	"                                                  ......................#..#.......#.....#.##.......                                                  ",
	"                                                  ..#................#...................#..........                                                  ",
	"                                                  .....##..............................#..##..#.....                                                  ",
	"                                                  .............#..#.......................#.........                                                  ",
	"                                                  ........#..................................#..#...                                                  ",
	"                                                  .....#.#........#.#................##.............                                                  ",
	"                                                  .....#.........................#..#...............                                                  ",
	"                                                  .#..#...............................#.............                                                  ",
	"                                                  .........................#.#......................                                                  ",
	"                                                  .#...............#...#.##...#................#....                                                  ",
	"                                                  .#.#..........#........#..#...............#.......                                                  ",
	"                                                  .........###..............#.......................                                                  ",
	"                                                  .....#...................#..............#.........                                                  ",
	"                                                  ..#....#.................#................#.....#.                                                  ",
	"                                                  ......#......#.............#..........#......#.###                                                  ",
	"                                                  ...................#..............#...#...........                                                  ",
	"                                                  ..................................................                                                  ",
	"                                                  #........#.....##.........................#.......                                                  ",
	"                                                  ..#....#.......#................................#.                                                  ",
	"..##.................#....................##................#.....#.#.#........#.............#...#..                                                  ",
	"................#.........#................#........##..............................................                                                  ",
	".......................#.##.................#.........#...........#.##...........................#..                                                  ",
	".......#.....#.............#..#....#..................................#......#..#............#.....#                                                  ",
	"............................#.........................##......#............###..###.......#.........                                                  ",
	"....#......#...........................................#.#................................#...#.....                                                  ",
	"....#..........#........#..........#.........#........................##...#..............#.....#...                                                  ",
	"#.............##.....##..........#....###...#..........#..........#........#..............#...#.....                                                  ",
	"......#...............#......#.........#.....#.#....#......#................#........#......#.......                                                  ",
	"........................#.#...........#....#..#.........#............#.#....#.....................#.                                                  ",
	".......................................#.....#..#...........#.........#...............#...#.........                                                  ",
	".................#........#.........#...##...#.....#..........#.....#...............................                                                  ",
	".......#........#..#..#..#......#........#.#........#.#...#........#.........#........##.#..........                                                  ",
	"...#..#..#.......##.............................#....#.#......#.....................................                                                  ",
	".......#.#................................#.........#....#.....#....#.....#................#........                                                  ",
	".....#..............##..#........#.........#..................#..........#....#.....................                                                  ",
	"............#.....#.................#........##...#.................#.#...........#.................                                                  ",
	"..............#.............##...........#...#.....#.#..........#..........................#........                                                  ",
	"#....##.....................#........##....#..................#.....................................                                                  ",
	"#.............................#..#..............#...................#............#..................                                                  ",
	".....#....#.#........#.........................#...#................#.#....................#..#.....                                                  ",
	"....................#.............#..........#....#........#...#...#................................                                                  ",
	".........................#...##...#.#...............#........#............#.........#.#..##.........                                                  ",
	"...#........#.##.........#.....#...#..............#.......#..#...#..........#...#.......#........#..                                                  ",
	"...#........#...##............#........#.............................##........##.........#.#....#..                                                  ",
	".....##.#......#..#.............................................#..#........###.#....#..............                                                  ",
	".................#...#.....#......#.............#.....#....................#.............#..........                                                  ",
	".....#.......................#.#....##..........#..#......#....................#....#........#.....#                                                  ",
	"....#....................................#..............#...........#............#..#........#.#....                                                  ",
	"................#.....#....##.....#...#..#....#.......##............#.##.#.......................#..                                                  ",
	".#...................................#.#..................#...#........#......#.....................                                                  ",
	"...........#.................#........#..#......#..................###...........##..#..............                                                  ",
	".....................#.........#.#.......#..................................#....##.........#.......                                                  ",
	"..................#......#.....#.......#..........#............#..#...#.........#...#.......#.......                                                  ",
	"................#.................#..#.............................#..#........#....#..#............                                                  ",
	".........................#.........................##............#..........##........#.............                                                  ",
	"...............##.......#........#.........................#.#......#.#.........#...................                                                  ",
	"...#........#......#...................#.##........#.#...............##.#...........................                                                  ",
	".....#.#.........#.........#.#....#...........#.#.............#................#.#......#......#....                                                  ",
	"#.............#.....#.....###...........................#......................................#....                                                  ",
	".#..#........#......#......#..#....#......#.#................#..#.#.........#..............#......#.                                                  ",
	"....#......#.......................#...#....#.............#......##.........................#...#...                                                  ",
	".........#............#...#...#..........#.#.........#............................##....#.........#.                                                  ",
	"...........................#...........#.......#..#....................#..................#.....##..                                                  ",
	"......#....#.#.##.....#..#..........##.....#....#.........#......#......#..........#..#.....#.#.....                                                  ",
	".........#.........................#....#.........................#..........#.#..............#.#...                                                  ",
	"................#................#..#...............................................................                                                  ",
	"..........#.........#..................#......................##..#..#........#...............#.....                                                  ",
	".....#........#..#.........#...............................#...#.........................#..........                                                  ",
	"....#..#......#...#.......#..#.#.#.............#.........##..#.........#...................#.....##.                                                  ",
	".....#.................#..........................                                                                                                    ",
	"#..#.........#....#...................#...........                                                                                                    ",
	"..#......#....#......#............................                                                                                                    ",
	"..#...............................#...............                                                                                                    ",
	"....#.#...#.........................#.#.........#.                                                                                                    ",
	"#..............##...#..#.#.........#........#.....                                                                                                    ",
	"..............#.......................###.........                                                                                                    ",
	"#.#...#..............#...........#...........#.#..                                                                                                    ",
	"..............................#...................                                                                                                    ",
	"........................#.#...#....#..............                                                                                                    ",
	".......#...........................#..#...........                                                                                                    ",
	"...................#......#.....#....#.#.........#                                                                                                    ",
	"............##........................##.#.......#                                                                                                    ",
	".....#................#..............##...........                                                                                                    ",
	"..............#........#...###................#...                                                                                                    ",
	"..#....................#.......................#..                                                                                                    ",
	"#..#.#......#......#.........#............#.......                                                                                                    ",
	"......................#......#....................                                                                                                    ",
	"....#....#..#....#............#....#..............                                                                                                    ",
	"....##...........#.......##......#......#..#..#...                                                                                                    ",
	".#..........##...................................#                                                                                                    ",
	"..................#..#...........................#                                                                                                    ",
	"...............#............................#.....                                                                                                    ",
	"...#.......#................#.#...#........#.....#                                                                                                    ",
	".......##......#...#...........#...........#......                                                                                                    ",
	"..........................#......#..#.............                                                                                                    ",
	".........#.......#..........#.....................                                                                                                    ",
	".#.............#...........#....#.................                                                                                                    ",
	".....#....#................#..........#...........                                                                                                    ",
	"...#.....................#.....#..................                                                                                                    ",
	".......#.............#.....#.#.........#..........                                                                                                    ",
	"...#...........#..#.................#..........##.                                                                                                    ",
	"....##.......................#.........#...#......                                                                                                    ",
	"............#........#.........#.......##.#..#....                                                                                                    ",
	"..............#...........................#....###                                                                                                    ",
	"....#........#.#....#......#.#..#.........#.......                                                                                                    ",
	"....#....................#.........#.........#....                                                                                                    ",
	".........................................##.......                                                                                                    ",
	"........#....#..#.#..#.........#...#.........#....                                                                                                    ",
	".............................#..#...##........#...                                                                                                    ",
	"...#.......#.......#...............#..............                                                                                                    ",
	"......................................#......#....                                                                                                    ",
	".....#..................#.........................                                                                                                    ",
	"#.....#.....#..#..................................                                                                                                    ",
	"..#.....#..#...#................#.....#..........#                                                                                                    ",
	".....................#............#...............                                                                                                    ",
	".......#...................................#.....#                                                                                                    ",
	"............#.#..#..#...#.........#...............                                                                                                    ",
	"..##..........#...#..#........#..............#....                                                                                                    ",
	"....#.....#..............................#........                                                                                                    ",
}
var moves = []int{23, L, 18, L, 48, R, 15, R, 47, R, 38, R, 29, L, 34, L, 19, L, 43, R, 3, L, 35, R, 3, L, 49, L, 30, L, 34, R, 17, L, 42, L, 18, L, 20, R, 2, L, 44, R, 50, L, 42, R, 26, L, 8, L, 20, L, 30, R, 42, L, 2, L, 8, R, 15, R, 46, L, 12, R, 15, R, 38, L, 10, R, 43, L, 2, R, 42, R, 11, R, 43, R, 47, L, 27, R, 49, L, 28, R, 2, R, 14, L, 26, L, 13, L, 21, R, 36, R, 20, R, 28, R, 40, L, 49, L, 4, R, 34, R, 35, R, 34, L, 43, L, 50, L, 2, L, 48, R, 31, R, 39, R, 6, L, 26, R, 37, R, 1, R, 28, L, 43, L, 23, R, 46, L, 5, R, 15, L, 41, R, 11, R, 23, L, 36, R, 40, L, 47, L, 33, R, 37, L, 25, R, 36, L, 22, L, 12, L, 42, R, 26, L, 44, L, 41, R, 45, R, 13, R, 38, L, 4, R, 29, L, 15, L, 2, L, 6, L, 23, R, 21, L, 1, L, 19, L, 22, R, 28, R, 43, R, 19, L, 43, R, 7, R, 10, R, 19, L, 1, L, 40, R, 45, L, 49, L, 45, R, 37, R, 7, R, 9, R, 40, R, 41, L, 13, R, 29, R, 13, R, 24, R, 47, R, 30, L, 17, R, 50, L, 6, L, 13, L, 40, L, 5, L, 24, L, 46, R, 30, L, 42, R, 36, L, 33, L, 50, R, 46, R, 15, L, 50, L, 6, R, 4, R, 33, R, 6, L, 41, L, 32, R, 25, L, 43, L, 20, L, 45, R, 47, R, 40, R, 41, L, 31, L, 19, R, 44, R, 33, R, 2, R, 46, L, 2, L, 26, R, 25, R, 3, L, 11, L, 36, L, 34, R, 4, R, 48, L, 13, L, 17, L, 49, L, 49, R, 45, L, 35, R, 21, L, 27, R, 8, R, 41, L, 25, L, 13, R, 45, L, 32, R, 35, R, 44, R, 33, R, 39, R, 36, L, 10, R, 19, R, 49, R, 1, R, 23, L, 49, L, 22, L, 12, R, 33, R, 20, R, 13, R, 20, R, 26, R, 27, L, 17, L, 25, R, 48, L, 1, L, 40, L, 15, L, 43, R, 45, R, 6, R, 47, R, 48, L, 46, R, 48, R, 7, L, 33, L, 50, R, 14, R, 14, R, 31, R, 32, R, 21, R, 34, L, 15, L, 34, L, 19, R, 14, L, 14, L, 41, R, 37, R, 14, L, 50, R, 32, L, 11, R, 4, L, 41, L, 22, L, 20, L, 34, R, 49, R, 32, R, 6, L, 2, L, 8, L, 20, L, 37, R, 2, L, 18, R, 15, L, 3, R, 16, L, 42, L, 15, L, 43, L, 38, R, 4, R, 39, R, 35, L, 50, R, 36, L, 31, R, 12, L, 50, R, 22, L, 25, R, 12, R, 15, L, 37, L, 42, R, 26, L, 23, R, 6, L, 22, R, 37, R, 8, L, 40, R, 29, L, 44, L, 46, R, 36, L, 32, L, 17, L, 16, L, 31, R, 27, R, 46, L, 49, R, 19, R, 12, L, 25, L, 33, R, 28, L, 16, L, 2, R, 20, R, 37, L, 40, L, 13, R, 27, R, 31, R, 23, L, 23, L, 12, R, 18, L, 44, R, 49, R, 3, R, 50, R, 27, R, 31, R, 3, R, 31, R, 21, R, 20, R, 37, L, 7, L, 47, R, 33, R, 13, L, 20, L, 45, L, 25, L, 14, R, 47, R, 32, L, 50, L, 33, R, 6, L, 30, L, 38, L, 40, R, 34, R, 8, R, 13, R, 48, L, 10, R, 22, L, 2, L, 5, R, 43, R, 31, L, 9, R, 25, R, 34, L, 9, R, 38, R, 46, R, 44, L, 24, R, 16, L, 24, L, 35, L, 49, R, 9, L, 3, R, 16, L, 15, R, 18, L, 39, L, 6, R, 23, R, 7, L, 38, L, 17, R, 34, R, 25, R, 35, R, 28, R, 1, L, 30, L, 48, L, 13, R, 21, R, 27, L, 22, L, 17, R, 40, R, 27, L, 9, R, 27, L, 4, R, 7, R, 20, R, 14, R, 39, L, 13, L, 2, R, 31, L, 1, R, 31, L, 44, L, 31, L, 35, L, 7, L, 49, R, 21, R, 14, L, 20, L, 33, R, 43, L, 41, R, 16, R, 19, L, 9, L, 40, L, 27, L, 48, R, 49, R, 44, R, 2, R, 12, R, 16, L, 10, R, 26, L, 40, L, 45, R, 32, R, 19, R, 10, R, 24, R, 36, R, 41, R, 5, L, 8, R, 41, R, 30, L, 27, L, 22, L, 20, L, 47, R, 30, L, 26, R, 17, R, 37, R, 16, L, 3, R, 19, L, 13, R, 37, L, 26, R, 16, R, 33, R, 46, R, 25, L, 41, L, 25, L, 2, L, 27, R, 7, L, 49, R, 29, L, 42, L, 1, R, 47, R, 27, L, 33, L, 20, R, 26, L, 36, L, 15, R, 41, L, 27, R, 17, R, 27, R, 42, L, 15, L, 14, R, 30, R, 1, L, 25, R, 15, R, 2, R, 16, L, 1, L, 2, L, 5, R, 29, L, 13, R, 30, L, 11, L, 26, L, 26, L, 39, R, 41, L, 50, R, 32, R, 25, L, 8, R, 1, R, 10, R, 6, L, 8, L, 45, L, 36, R, 28, L, 26, R, 40, R, 31, R, 46, L, 28, R, 36, R, 39, L, 19, L, 41, L, 23, R, 12, R, 25, R, 48, R, 11, L, 10, R, 6, R, 5, R, 23, R, 47, R, 34, L, 34, L, 8, R, 12, R, 48, L, 48, R, 27, R, 40, L, 45, R, 28, L, 8, L, 11, R, 45, L, 34, R, 39, R, 4, R, 41, L, 4, R, 37, L, 15, L, 23, R, 28, R, 1, L, 34, R, 41, R, 46, R, 11, L, 46, L, 29, L, 33, R, 49, R, 14, L, 22, R, 14, R, 32, L, 45, L, 23, L, 1, R, 35, R, 2, R, 12, R, 43, L, 2, R, 8, L, 13, L, 22, R, 27, R, 31, L, 36, R, 4, L, 1, R, 13, R, 38, L, 40, L, 40, R, 36, L, 33, L, 21, L, 39, R, 39, R, 33, R, 17, L, 31, R, 31, R, 32, R, 27, L, 36, L, 4, R, 46, L, 23, L, 37, R, 12, L, 16, R, 37, L, 1, R, 35, R, 16, L, 49, L, 15, L, 39, L, 37, R, 48, L, 32, R, 30, R, 15, L, 38, R, 42, R, 46, R, 42, L, 10, R, 47, R, 18, R, 27, L, 14, L, 48, R, 16, R, 42, L, 15, L, 29, L, 15, L, 1, L, 25, L, 28, R, 28, L, 5, L, 11, R, 42, R, 35, L, 22, L, 7, R, 21, L, 2, R, 49, R, 26, L, 43, L, 32, L, 14, L, 11, R, 33, R, 19, R, 21, R, 17, L, 50, L, 28, R, 37, L, 20, R, 15, L, 18, L, 11, R, 20, R, 14, L, 4, L, 32, L, 29, R, 44, R, 22, L, 42, R, 39, L, 2, L, 39, R, 33, L, 34, L, 5, L, 18, R, 25, R, 11, L, 3, R, 17, R, 35, R, 38, R, 30, L, 17, L, 6, L, 24, R, 13, L, 30, R, 20, R, 30, R, 28, L, 5, L, 31, L, 50, L, 46, L, 3, R, 32, R, 28, L, 43, L, 20, L, 23, R, 32, L, 43, R, 33, R, 50, L, 31, R, 29, R, 48, L, 12, L, 28, L, 11, R, 25, R, 14, L, 15, L, 25, R, 5, R, 1, R, 20, L, 44, R, 25, R, 31, R, 20, R, 29, L, 9, L, 37, L, 7, R, 12, L, 33, L, 44, L, 28, R, 36, R, 50, L, 19, L, 24, L, 9, L, 29, R, 5, R, 45, R, 20, L, 21, R, 22, L, 41, L, 25, R, 24, R, 27, L, 38, R, 29, L, 2, R, 23, R, 34, L, 3, R, 34, R, 11, L, 35, L, 26, R, 34, L, 27, R, 27, L, 14, R, 28, R, 19, R, 28, L, 47, L, 5, R, 30, L, 17, R, 44, L, 5, R, 49, R, 17, R, 48, R, 49, L, 15, R, 48, R, 4, R, 44, L, 9, L, 3, R, 28, R, 4, L, 6, L, 40, R, 24, L, 46, L, 34, R, 40, R, 26, L, 29, R, 4, R, 38, R, 20, R, 43, R, 47, R, 36, R, 19, R, 17, R, 45, L, 34, R, 19, R, 11, L, 4, R, 41, L, 23, L, 50, R, 34, L, 45, L, 15, L, 38, R, 38, R, 18, R, 4, L, 15, L, 26, L, 15, R, 49, R, 22, R, 14, L, 33, R, 37, R, 22, L, 20, L, 19, L, 23, L, 9, L, 40, R, 30, R, 42, L, 44, R, 22, L, 41, L, 20, L, 26, R, 32, R, 29, R, 40, L, 48, L, 18, L, 43, L, 48, R, 46, R, 24, R, 25, L, 15, R, 37, L, 32, R, 22, L, 22, R, 17, R, 27, L, 28, L, 28, R, 15, L, 38, L, 36, L, 20, R, 7, R, 35, R, 38, L, 42, L, 22, R, 24, L, 27, L, 2, R, 39, R, 9, R, 1, L, 6, R, 15, R, 12, R, 7, R, 50, R, 26, R, 20, L, 41, R, 44, R, 27, R, 42, R, 40, L, 50, R, 12, L, 50, L, 37, R, 46, R, 45, L, 7, R, 27, R, 45, R, 5, R, 5, L, 37, R, 34, L, 24, R, 25, L, 1, L, 5, L, 35, R, 20, R, 29, L, 11, L, 45, L, 1, L, 1, L, 18, L, 43, L, 38, L, 50, L, 1, L, 18, R, 48, L, 18, L, 24, L, 9, L, 1, R, 28, R, 8, R, 6, R, 46, L, 9, R, 18, R, 4, R, 33, R, 49, R, 28, R, 35, L, 18, R, 45, R, 27, L, 46, R, 10, L, 41, R, 20, L, 25, R, 49, R, 49, R, 50, L, 25, R, 30, R, 20, R, 45, L, 47, R, 41, L, 39, L, 50, L, 39, L, 5, R, 36, R, 46, L, 28, R, 42, L, 45, R, 11, R, 2, R, 3, L, 18, R, 15, L, 43, R, 48, L, 35, R, 21, L, 20, R, 49, R, 47, L, 33, L, 31, R, 10, R, 7, L, 20, L, 30, L, 35, R, 25, L, 16, L, 49, L, 41, R, 44, R, 49, L, 31, R, 10, R, 40, R, 17, R, 30, L, 16, L, 17, R, 17, R, 13, R, 46, L, 32, R, 46, R, 34, R, 46, L, 23, R, 40, L, 38, L, 13, L, 20, R, 46, R, 27, L, 38, L, 48, L, 2, L, 26, L, 32, R, 30, L, 29, L, 15, L, 41, R, 19, R, 13, R, 46, L, 28, R, 6, R, 23, L, 26, L, 40, R, 24, R, 40, R, 4, L, 7, L, 21, R, 40, L, 5, R, 34, R, 31, L, 6, L, 12, R, 19, R, 42, R, 29, R, 31, L, 19, R, 8, L, 15, L, 30, R, 10, L, 42, R, 33, R, 6, R, 20, L, 48, L, 26, R, 19, L, 24, L, 34, R, 4, R, 47, R, 26, R, 31, L, 44, R, 47, L, 14, L, 9, R, 41, R, 41, R, 38, L, 7, L, 38, L, 30, L, 37, L, 13, R, 23, L, 44, L, 15, R, 48, R, 33, R, 18, L, 49, L, 20, L, 26, L, 39, L, 8, L, 24, R, 50, L, 19, L, 33, R, 27, L, 27, R, 23, R, 24, L, 36, R, 12, L, 22, R, 23, L, 34, L, 49, R, 2, L, 14, R, 45, R, 38, R, 23, R, 46, R, 18, L, 40, L, 39, L, 20, L, 24, R, 46, L, 34, L, 15, L, 1, L, 44, R, 28, L, 20, R, 23, R, 18, L, 19, R, 27, L, 15, L, 1, R, 34, R, 35, R, 1, L, 26, R, 47, R, 12, R, 26, R, 7, L, 18, R, 36, L, 16, R, 48, R, 37, L, 18, R, 18, R, 29, L, 16, L, 21, R, 24, L, 45, R, 27, L, 15, L, 32, L, 48, R, 38, L, 6, R, 48, L, 44, L, 29, L, 2, R, 47, R, 50, L, 13, L, 32, R, 40, R, 48, L, 9, L, 46, L, 1, L, 50, R, 8, L, 3, L, 13, L, 13, R, 30, L, 10, L, 36, L, 8, L, 13, L, 33, R, 13, R, 14, R, 36, L, 16, L, 24, L, 38, L, 7, R, 1, L, 22, L, 48, L, 36, L, 22, L, 39, R, 44, R, 24, L, 44, R, 21, R, 20, R, 17, R, 1, L, 17, L, 19, R, 50, L, 45, R, 6, R, 6, L, 13, L, 12, R, 25, R, 2, R, 37, L, 43, L, 46, L, 34, R, 1, L, 26, R, 9, R, 17, L, 25, R, 2, L, 5, R, 31, R, 20, R, 33, L, 44, L, 3, L, 43, R, 12, R, 40, L, 32, L, 7, L, 4, L, 39, R, 38, R, 18, L, 7, L, 14, L, 21, R, 21, R, 15, L, 30, L, 50, R, 6, L, 6, L, 37, R, 5, R, 24, L, 39, R, 19, L, 27, L, 28, L, 47, R, 20, R, 31, L, 15, R, 31, L, 23, R, 1, L, 2, L, 43, R, 39, R, 36, R, 18, R, 30, R, 21, R, 3, R, 34, L, 35, R, 35, R, 25, R, 38, L, 40, R, 27, R, 20, R, 47, R, 23, R, 45, L, 20, R, 3, R, 41, L, 17, L, 40, L, 3, R, 14, R, 37, R, 22, R, 48, L, 47, L, 40, L, 43, R, 1, R, 33, L, 6, L, 43, L, 28, R, 17, L, 48, L, 28, R, 32, R, 24, R, 39, R, 22, L, 31, R, 30, L, 18, L, 36, L, 13, L, 12, R, 24, R, 16, L, 20, L, 26, R, 47, L, 20, L, 6, R, 25, R, 28, R, 43, L, 32, R, 47, R, 12, R, 49, R, 32, R, 10, L, 24, R, 15, L, 50, L, 39, L, 41, L, 16, R, 25, R, 40, R, 28, R, 31, L, 9, L, 50, L, 37, R, 24, L, 15, R, 7, L, 26, L, 22, R, 49, R, 33, R, 50, R, 38, L, 46, L, 17, R, 29, R, 29, L, 21, L, 35, R, 20, L, 50, R, 7, R, 26, R, 36, R, 29, L, 47, R, 44, R, 25, R, 29, L, 1, L, 41, L, 50, L, 25, R, 30, L, 1, L, 22, L, 12, R, 6, L, 7, L, 32, L, 33, L, 19, L, 34, L, 31, R, 5, R, 25, R, 28, L, 12, R, 5, R, 35, L, 34, R, 41, R, 50, L, 8, R, 20, R, 28, L, 3, R, 48, L, 7, R, 10, R, 26, R, 16, R, 17, R, 38, R, 35, R, 31, L, 7, L, 48, L, 50, R, 37, L, 46, L, 31, L, 36, L, 46, R, 45, L, 50, R, 18, L, 46, L, 39, L, 26, L, 48, R, 38, L, 11, L, 37, R, 50, L, 48, R, 43, R, 17, L, 31, L, 41, R, 38, L, 31, R, 19, R, 11, R, 41, L, 46, L, 12, L, 14, L, 45, R, 24, R, 33, R, 23, L, 25, L, 16, R, 7, R, 24, R, 39, L, 21, R, 18, L, 31, R, 33, L, 49, R, 4, L, 33, L, 32, L, 3, R, 29, L, 37, L, 40, R, 4, L, 33, L, 16, L, 9, R, 7, R, 30, R, 34, L, 37, R, 13, R, 8, L, 50, L, 4, R, 49, R, 50, L, 17, L, 50, L, 2, R, 11, L, 32, L, 34, L, 21, R, 6, L, 49, L, 16, R, 46, R, 27, R, 25, R, 14, R, 35, L, 46, R, 21, R, 5, R, 43, R, 16, R, 28, R, 43, L, 4, L, 24, L, 26, L, 2, R, 26, R, 15, R, 41, L, 2, R, 37, L, 33, L, 6, R, 37, L, 39, R, 29, L, 43, R, 34, R, 14, L, 28, L, 14, R, 50, L, 48, R, 21, R, 32, L, 4, L, 7, L, 47, R, 26, R, 34, R, 16, R, 47, R, 19, L, 11, R, 19, R, 40, L, 24, R, 47, L, 8, L, 13, R, 47, R, 10, R, 43, L, 23, L, 10, L, 34, L, 1, R, 27, R, 15, L, 32, L, 40, L, 18, L, 40, L, 45, R, 41, L, 50, L, 28, R, 9, L, 9, L, 41, R, 19, R, 6, L, 26, R, 45, R, 5, R, 49, R, 21, R, 45, L, 21, L, 48, R, 5, R, 43, L, 25, L, 44, L, 15, L, 4, R, 46, R, 45, R, 35, L, 8, R, 21, R, 33, R, 10, L, 7, L, 5, R, 22, R, 12, R, 10, L, 28, R, 43, L, 49, L, 33, R, 28, R, 12, L, 3, L, 24, L, 21, L, 28, R, 7, L, 1, L, 42, L, 12, L, 50, R, 26, L, 28, L, 19, L, 3, R, 39, R, 10, R, 27, L, 17, R, 16, L, 12, R, 36, L, 22, L, 40, L, 38, L, 30, R, 16, R, 10, L, 2, R, 39, R, 18, L, 20, L, 24, R, 11, R, 14, R, 8, R, 37, R, 45, R, 16, R, 33, L, 29, R, 2, R, 27, L, 8, R, 22, R, 15, R, 21, L, 26, L, 14, R, 40, R, 27, L, 50, L, 30, R, 24, L, 31, L, 9, L, 9, R, 31, R, 49, L, 21, R, 42, L, 19, L, 19, L, 5, R, 24, L, 34, R, 47, R, 6, R, 25, R, 21, R, 15, R, 24, R, 43, R, 25, L, 4, R, 14, R, 9, L, 5, L, 42, L, 15, L, 40, R, 18, R, 33, L, 47, R, 37, R, 22, L, 38, R, 1, R, 35, R, 41, R, 39, L, 34, L, 46, L, 27, L, 2, R, 18, L, 42, R, 13, L, 49, R, 46, L, 49, L, 15, R, 39, R, 13, L, 24, R, 36, L, 29, L, 5, R, 18, R, 44, R, 36, R, 37, L, 6, R, 48, R, 39, L, 27, R, 11, R, 16, R, 35, L, 48, R, 47, R, 44, L, 42, R, 29, R, 12, L, 30, R, 20, L, 50, R, 17, L, 11, L, 32, R, 27, L, 11, L, 49, L, 43, L, 9, R, 18, R, 2, R, 33, L, 15, R, 5, R, 24, R, 28, R, 45, R, 41, R, 10, L, 43, R, 46, L, 44, L, 36, L, 21, R, 4, R, 27, L, 8, R, 7, R, 13, L, 46, R, 25, L, 43, L, 4, R, 44, R, 28, R, 38, L, 27, L, 11, R, 45, L, 25, R, 17, L, 13, R, 26, L, 4, L, 33, L, 20, R, 39, R, 25, L, 16, R, 28, R, 36, L, 10, L, 14, R, 13, L, 46, L, 25, L, 22, R, 44, R, 20, R, 5, L, 11, L, 32, L, 10, L, 32, R, 1, L, 20, R, 5, R, 15, L, 34, L, 23, R, 24, R, 2, R, 25, L, 36, R, 39, R, 15, L, 10, L, 26, L, 13, L, 42, L, 21, L, 8, L, 22, L, 9, L, 25, R, 9, R, 3, R, 40, R, 50, R, 15, R, 29, L, 10, L, 27, L, 13, L, 20, R, 32, R, 5, R, 4, L, 2, R, 11, L, 25, L, 29, L, 22, L, 5, L, 6, R, 22, R, 49, R, 18, L, 24, L, 45, L, 40, R, 4, L, 3, L, 41, L, 12, L, 8, R, 5, L, 29, L, 26, R, 22, L, 40, R, 20, L, 7, L, 6, L, 18, R, 39, R, 24, R, 22, L, 9, L, 41, L, 32, L, 30, L, 21, L, 15, R, 10, R, 32, R, 31, L, 31, R, 8, L, 5, R, 3, R, 5, R, 41, R, 48, R, 16, L, 35, R, 37, L, 33, R, 9, R, 27, R, 25, L, 4, L, 15, L, 34, L, 18, L, 45, R, 22, L, 22, L, 32, R, 31, L, 32, R, 41, L, 10, R, 41, R, 45, R, 34, R, 36, R, 20, L, 46, L, 40, L, 37, L, 22, L, 21, R, 8, R, 23, R, 50, R, 32, L, 40, R, 24, R, 43, L, 47, L, 36, L, 46, L, 19, R, 1, L, 23, R, 48, L, 25, L, 8, R, 5, R, 21, L, 13, R, 27, R, 28, L, 14, R, 12, R, 49, L, 31, L, 22, L, 19, R, 8, R, 41, L, 14, R, 3, R, 45, L, 49, L, 15, L, 3, L, 6, L, 48, R, 9, L, 14, L, 11, R, 44, L, 31, R, 35, L, 25, L, 47, R, 6, R, 29, R, 35, R, 49, L, 16, L, 38, L, 7, L, 2, R, 8, R, 50, R, 50, L, 22, L, 30, L, 38, R, 38, L, 3, R, 28, L, 14, L, 3, R, 12, L, 50, L, 18, L, 5, L, 6, L, 17, L, 35, L, 16, L, 36, R, 28, R, 5, R, 17, R, 29, R, 27, R, 20, R, 20, L, 23, L, 38, R, 44, L, 28, R, 6, R, 29, R, 5, R, 28, R, 1, R, 34, R, 2, R, 33, L, 49, L, 42, L, 11, R, 11, R, 17, L, 27, L, 25, R, 49, R, 48, L, 9, L, 19, R, 10, R, 1, R, 33, R, 27, L, 35, L, 35, R, 45, R, 13, L, 23, R, 14, R, 14, R, 50, L, 39, L, 10, R, 34, L, 33, R, 39, L, 42, R, 7, R, 16, L, 43, L, 38, L, 19, R, 8, R, 12, R, 37, L, 20, L, 2, R, 16, L, 32, L, 30, R, 24, R, 38, L, 45, L, 24, L, 19, R, 43, L, 19, R, 25, L, 41, R, 46, R, 48, R, 49, L, 36, R, 40, L, 12, L, 13, L, 29, R, 38, L, 27, L, 24, R, 45, R, 6, L, 20, R, 12, R, 7, R, 29}
